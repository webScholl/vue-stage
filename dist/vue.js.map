{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/compiler/parser.js","../src/compiler/generate.js","../src/compiler/index.js","../src/lifecycle.js","../src/init.js","../src/dom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFuntion(val) {\n  return typeof (val) === 'function'\n}\nexport function isObject(val) {\n  return typeof (val) === 'object' && val !== null\n}","const oldArrayPrototype = Array.prototype\nconst arrayMethods = Object.create(oldArrayPrototype) // 让arrayMethods通过__proto__找到数组的原型方法\nconst methods = ['push', 'pop', 'unshift', 'shift', 'splice', 'sort', 'reverse']\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) { // 数组的方法重写操作\n    let ob = this.__ob__\n    oldArrayPrototype[method].call(this, ...args)\n    let inserted = null\n    switch (method) {\n      case 'splice':\n        inserted = args.slice(2)\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n    }\n    if (inserted) ob.observeArray(inserted)\n  }\n})\n\nexport default arrayMethods\n","import { isObject } from '../utils'\nimport arrayMethods from './array'\nclass Observer {\n  constructor(data) {\n    // data.__ob__ = this \n    Object.defineProperty(data, '__ob__', { // 给对象和数组添加一个自定义属性__ob__\n      value: this,\n      enumerable: false // 标识这个属性不能被枚举\n    })\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n\n      this.observeArray(data) // 对数组内对元素进行观测\n    } else {\n      this.walk(data)\n    }\n  }\n  observeArray(data) {\n    data.forEach(val => {\n      observe(val)\n    })\n  }\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n// vue2应用了defineProperty需要一加载都时候，就进行递归操作，所以耗性能，如果层次过深也会浪费性能\nfunction defineReactive(obj, key, val) { //这里是闭包\n  observe(val) // 递归进行观测数据 不管有多少层都进行defineProperty\n  Object.defineProperty(obj, key, {\n    get() {\n      return val\n    },\n    set(newVal) {\n      observe(newVal)\n      val = newVal\n    },\n  })\n}\nfunction observe(data) {\n  if (!isObject(data)) return\n  if (data.__ob__) return\n  new Observer(data)\n\n}\nexport default observe","import { isFuntion } from './utils'\nimport observe from './observe'\nfunction initState(vm) {\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\nfunction initData(vm) {\n  let data = vm.$options.data\n  vm._data = data = isFuntion(data) ? data.call(vm) : data\n  observe(data) // 观测数据\n\n  Object.keys(data).forEach(key => { // 代理数据（懒代理）\n    proxy(vm, key, '_data')\n  })\n}\n\nfunction proxy(vm, key, source) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newVal) {\n      vm[source][key] = newVal\n    },\n  })\n}\nexport default initState","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>']+)))?/\nconst startTagClose = /^\\s*(\\/?)>/\n\nexport function parserHTML(html) {\n\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n\n      let end;\n      let attr;\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) { //要有属性 不能为开始的结束标签\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\n        advance(attr[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n      }\n\n      return match\n    }\n  }\n  function advance(len) {\n    html = html.substring(len)\n  }\n  function createASTElement(tag, attrs, parent) {\n    return {\n      tag,\n      attrs,\n      type: 1,\n      parent,\n      children: []\n    }\n  }\n  // 我要构建父子关系\n  let stack = []\n  let root = null\n\n  function start(tagName, attrs) {\n    // 遇到开始标签 就取栈中的最后一个作为父节点\n    let parent = stack[stack.length - 1]\n    let element = createASTElement(tagName, attrs, parent)\n    if (root === null) {\n      root = element\n    }\n    if (parent) {\n      parent.children.push(element)\n    }\n    stack.push(element)\n  }\n  function end() {\n    stack.pop()\n  }\n  function text(chars) {\n    let parent = stack[stack.length - 1]\n    chars = chars.replace(/\\s/g, '')\n    if (chars) {\n      parent.children.push({\n        type: 2,\n        text: chars\n      })\n    }\n  }\n  // 解析标签和文本\n  while (html) {\n    let index = html.indexOf('<')\n    if (index === 0) { // 解析开始标签 并且把属性也解析出来\n      const startTagMatch = parseStartTag()\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue;\n      }\n      let endTagMatch\n      if (endTagMatch = html.match(endTag)) {\n        advance(endTagMatch[0].length)\n        end()\n        continue;\n      }\n    }\n    if (index > 0) { // 文本\n      let chars = html.substring(0, index)\n      advance(chars.length)\n      text(chars)\n    }\n  }\n  return root\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps(attrs) {\n  let str = ''\n  for (let i = 0; i < attrs.length; i++) {\n    const attr = attrs[i]\n    if (attr === 'style') {\n      const styles = {}\n      attr.value.replace(/([^;:]+):([^;:]+)/g, function () {\n        styles[arguments[1]] = arguments[2]\n      })\n      attr.value = styles\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\nfunction gen(child) {\n  if (child.type === 1) {\n    return generate(child)\n  } else {\n    let text = child.text\n    if (!defaultTagRE.test(text)) return `_v(${text})`\n    let lastIndex = defaultTagRE.lastIndex = 0\n    let tokens = []\n    let match\n    while (match = defaultTagRE.exec(text)) {\n      let index = match.index\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n    return `_v(${tokens.join('+')})`\n  }\n}\nfunction genChildren(ast) {\n  let children = ast.children\n  if (children) {\n    return children.map(child => gen(child)).join(',')\n  }\n  return false\n}\nexport function generate(ast) {\n  let children = genChildren(ast)\n  let code = `_c('${ast.tag}',${ast.attrs.length ? genProps(ast.attrs) : ''},${children ? children : ''})`\n  return code\n}","import { parserHTML } from './parser'\nimport { generate } from './generate'\nexport function compileToFunction(template) {\n  // 将模版解析成ast语法树\n  let ast = parserHTML(template)\n  console.log('生成ast:', ast)\n  //  生成代码\n  let code = generate(ast)\n  console.log('生成code:', code)\n  // 生成render\n  let render = new Function(`with(this){return ${code}}`)\n  console.log('生成render:', render.toString())\n\n  return render\n}","export function mountComponent(vm) {\n  vm._render()\n}","import initState from './state'\nimport { compileToFunction } from './compiler'\nimport { mountComponent } from './lifecycle'\nfunction initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options\n    initState(vm)\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    // template -> ast(抽象语法树)：描述模版结构\n    // ast + data => 虚拟dom => 真实dom\n    const vm = this\n    const opts = vm.$options\n    el = document.querySelector(el) //获取真实的元素\n    vm.$el = el\n\n    if (!opts.render) { // 生成render\n      // 编译模版\n      let template = opts.template\n      if (!template) {\n        template = el.outerHTML\n      }\n      let render = compileToFunction(template)\n      opts.render = render\n    }\n    mountComponent(vm)\n  }\n}\nexport default initMixin","export function createElement(vm, tag, attrs, ...children) {\n  return vnode(vm, tag, attrs, children, attrs.key, undefined)\n}\nexport function createText(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\nfunction vnode(vm, tag, attrs, children, key, text) {\n  return { vm, tag, attrs, children, key, text }\n}\n","import { createElement, createText } from \"./dom\"\nimport { isObject } from \"./utils\"\n\nfunction renderMixin(Vue) {\n  Vue.prototype._c = function () { // 创建元素\n    const vm = this\n    return createElement(vm, ...arguments)\n  }\n  Vue.prototype._v = function (text) { // 创建文本\n    const vm = this\n    return createText(vm, text)\n  }\n  Vue.prototype._s = function (val) { // JSON.stringify\n    if (isObject(val)) return JSON.stringify(val)\n    return val\n  }\n  Vue.prototype._render = function () {\n    const vm = this\n    const { render, el } = vm.$options\n    const vnode = render.call(vm)\n    console.log('生成vnode:', vnode)\n  }\n}\nexport default renderMixin","import initMixin from './init'\nimport renderMixin from './render'\nfunction Vue(options) {\n  this._init(options) // 实现vue的初始化操作\n}\ninitMixin(Vue)\nrenderMixin(Vue)\n\nexport default Vue\n\n// 1、new Vue 会调用 _init()方法进行初始化操作\n// 2、会将用户的选项放到 vm.$options上\n// 3、会对当前选项上判断有没有data数据\n// 4、有data 判断data是不是一个函数，如果是函数取返回值\n// 5、observe 去观察data中的数据\n// 6、通过vm._data = data 获取数据\n// 7、循环proxy vm._data  vm[key] = vm._data[key]\n// 8、通过__ob__进行标识这个对象是否已经被观测\n\n// 如果有el 需要挂载在页面上\n"],"names":["isFuntion","val","isObject","oldArrayPrototype","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","ob","__ob__","call","inserted","slice","observeArray","Observer","constructor","data","defineProperty","value","enumerable","isArray","__proto__","walk","observe","keys","key","defineReactive","obj","get","set","newVal","initState","vm","opts","$options","initData","_data","proxy","source","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","parseStartTag","start","match","tagName","attrs","advance","length","end","attr","push","name","len","substring","createASTElement","tag","parent","type","children","stack","root","element","pop","text","chars","replace","index","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","i","styles","arguments","JSON","stringify","gen","child","generate","test","lastIndex","tokens","exec","trim","join","genChildren","ast","map","code","compileToFunction","template","console","log","render","Function","toString","mountComponent","_render","initMixin","Vue","_init","options","el","$mount","document","querySelector","$el","outerHTML","createElement","vnode","undefined","createText","renderMixin","_c","_v","_s"],"mappings":"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"}